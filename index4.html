<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title></title>

    <head>
        <meta charset="utf-8" />
        <meta
          name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
    
        <!-- Bootstrap CSS -->
        <!-- function to merge all css files in main.css -->
        <!-- build:css css/main.css -->
        <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
        />
        <script defer src="https://use.fontawesome.com/releases/v5.15.4/js/solid.js" integrity="sha384-/BxOvRagtVDn9dJ+JGCtcofNXgQO/CCCVKdMfL115s3gOgQxWaX/tSq5V8dRgsbc" crossorigin="anonymous"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.15.4/js/fontawesome.js" integrity="sha384-dPBGbj4Uoy1OOpM4+aRGfAOc0W37JkROT+3uynUgTHZCHZNMHfGXsmmvYTffZjYO" crossorigin="anonymous"></script>
        <link href="css/styles.css" rel="stylesheet" />
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <script type="text/javascript" src="js/lib/jquery-1.11.1.min.js" ></script>
        <script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous">
    <link href="./src/css/styles.css" rel="stylesheet" />
</script>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <title>Project - Data Visulization</title>
    <style>
      li {
        float: left;
      }

      li a {
        display: block;
        color: white;
        text-align: center;
        padding: 12px 14px;
        text-decoration: none;
      }

      svg {
        width: 100%;
        height: 100%;
      }

      #container {
        width: 75%;
        margin: auto;
        padding-top: 3%;
        background-color: #e5e5e5;
        text-align: center;

        text-align: center;
      }
      .yAxis {
        font-size: x-small;
      }

     

      .activeheader {
        color: red;
        font-weight: 600;
        background-color: white;
        padding: 5px;
        padding-left: 15px;
        padding-right: 15px;
      }

      .activeheadertext {
        color: black;
        padding: 0px;
        margin: 0px;
        padding-top: 4px;
      }
      /* add end */

    </style>
  </head>
  <body style="background-color: rgb(228, 249, 252); margin: 0px">
  
    <nav class="navbar navbar-dark navbar-expand-sm " style="background-color: black;">
      <div class="container">
        <!-- button to toggle menu on navbar -->
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#Navbar"
        >
          <!-- Bootstrap hamburger icon -->
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- div for collapsible navbar content. Div acts as a wrapper to the unordered list -->
        <div class="collapse navbar-collapse ml-0 ml-sm-3" id="Navbar">
          <ul class="navbar-nav mr-auto ">
            <li class="nav-item mx-4">
              <a class="nav-link" href="index.html" 
                >Geospatial Visualization
                - 1</a
              >
            </li>
            <li class="nav-item mx-4">
              <a class="nav-link" href="index2.html"
                > Geospatial Visualization - 2</a
              >
            </li>
            
            <li class="nav-item mx-4 activeheader " >
              <p class="activeheadertext "  
                >Stacked Bar Chart</p
              >
            </li>
            <li class="nav-item mx-4">
              <a class="nav-link" href="index5.html"
                > Line Chart</a
              >
            </li>
            <li class="nav-item mx-4">
              <a class="nav-link" href="index10.html"
                > Bar Chart - United States Covid cases by states</a
              >
            </li>
           
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="headerContainer">
      <div style="justify-content: center; padding-top: 50px;">
        <nav class="navbar navbar-light navbar-expand-sm " >
          <div class="container ">
            <!-- button to toggle menu on navbar -->
            
            <!-- div for collapsible navbar content. Div acts as a wrapper to the unordered list -->
            <div class="  ml-0 ml-sm-3" id="Navbar">
              <ul class="navbar-nav mr-auto bg-warning ">
                <li class="nav-item  " style="border: 1px solid #aaa">
                  <a class="nav-link" href="index3.html"
                    >People vaccinated by dose - All Countries </a
                  >
                </li>
                <li class="nav-item  " style="border: 1px solid #aaa; background-color: #f0ad4e;">
                  <a class="nav-link" href="index4.html"
                    >People vaccinated by dose - Top 30 Countries </a
                  >
                </li>
                <li class="nav-item  " style="border: 1px solid #aaa">
                  <a class="nav-link" href="index8.html"
                    >Compare Vaccine Initial doses & Booster doses - Top 30 Countries</a
                  >
                </li>
                <li class="nav-item  " style="border: 1px solid #aaa">
                  <a class="nav-link" href="index9.html"
                    >Compare Vaccine Initial doses & Booster doses - All Countries</a
                  >
                </li>
               
               
              </ul>
            </div>
          </div>
        </nav>
        </div>
    </div>
    <div id="tooltip"></div>
    <div id="container">
      <h2>Share of people vaccinated against COVID - 19</h2>

      <svg viewBox="0 0 1200 650"></svg>
    </div>

    <script>
      const svg = d3.select("svg");
      let margins = { top: 20, bottom: 50, left: 100, right: 20 };

      data = "Top30-Vaccination-data.csv";
      d3.csv(data, function (d) {
        return {
          Country: String(d.Team),
          goldmedal: Number(d["GoldMedal"]),
          silvermedal: Number(d["SilverMedal"]),
          bronzemedal: Number(d["BronzeMedal"]),
        };
      }).then((d) => {
        k = d3.map(d, function (d) {
          return d["Country"];
        }); // Just creating a list of states for further use

        //  Stacking data
        let stack = d3.stack().keys(["silvermedal", "bronzemedal"]);
        stackedseries = stack(d);

        // Finding minimum and maximum
        let xmin_max = {
          min: 0,
          max: d3.max(stackedseries, function (d) {
            return d3.max(d, function (d) {
              return d[1];
            });
          }),
        };

        const width = svg.attr("width");
        const height = svg.attr("height");

        // Making x and y scales
        xScale = d3
          .scaleLinear()
          .domain([xmin_max.min, xmin_max.max])
          .range([0 + margins.left, 1200 - margins.right]);
        yScale = d3
          .scaleBand()
          .domain(
            d3.map(d, function (d) {
              return d["Country"];
            })
          )
          .range([600 - margins.bottom, 0 + margins.top])
          .padding(1);

        color = ["#2a6a53", "#30aa85"];

        // Creating groups for the data
        let groups = svg
          .selectAll("g")
          .data(stackedseries)
          .enter()
          .append("g")
          .style("fill", function (d, i) {
            return color[i];
          });
        console.log(groups);

        let rects = groups
          .selectAll("rect")
          .data(function (d) {
            return d;
          })
          .enter()
          .append("rect")
          .attr("x", function (d) {
            return 0 + margins.left;
          })
          .attr("y", function (d, i) {
            return yScale(k[i]);
          })
          .attr("height", (d) => 10)
          .attr("width", function (d) {
            return 0;
          });

        rects
          .transition()
          .delay(function (d, i) {
            return i * 100;
          })
          .duration(100)
          .attr("x", function (d) {
            return xScale(d[0]);
          })
          .attr("width", function (d) {
            return xScale(d[1]) - xScale(d[0]);
          })
          .attr("height", (d) => 10);

        let y_axis = svg
          .append("g")
          .attr("transform", "translate(" + margins.left + ", " + 5 + ")")
          .attr("class", "yAxis")
          .call(d3.axisLeft(yScale));
        let x_axis = svg
          .append("g")
          .attr("transform", "translate(0, " + (602 - margins.bottom) + ")")
          .attr("class", "yAxis")
          .call(d3.axisBottom(xScale));

        svg
          .append("circle")
          .attr("cx", 300)
          .attr("cy", 6.5)
          .attr("r", 6)
          .style("fill", "#2a6a53");
        svg
          .append("circle")
          .attr("cx", 710)
          .attr("cy", 6.5)
          .attr("r", 6)
          .style("fill", "#30aa85");
        // svg.append("text").attr("x", 1100).attr("y", 25).text("Gold Medal").style("font-size", "15px").attr("alignment-baseline","top-right")
        svg
          .append("text")
          .attr("x", 320)
          .attr("y", 10)
          .text("Share of people with a complete initial protocol")
          .style("font-size", "15px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 730)
          .attr("y", 10)
          .text("Share of people only partly vaccinated")
          .style("font-size", "15px")
          .attr("alignment-baseline", "top-right");

        svg
          .append("text")
          .attr("x", 106)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 216)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 324)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 433)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 540)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 648)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 756)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 864)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 972)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 1080)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
        svg
          .append("text")
          .attr("x", 1190)
          .attr("y", 569.5)
          .text("%")
          .style("font-size", "12px")
          .attr("alignment-baseline", "top-right");
      });
    </script>
  </body>
</html>
